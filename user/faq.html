

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Frequently Asked Questions (FAQ) and Common Errors &mdash; AMR-Wind 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Post-processing Examples" href="post_processing_examples.html" />
    <link rel="prev" title="Running AMR-Wind" href="run.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AMR-Wind
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../walkthrough/index.html">Walkthrough</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="features.html">Capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="build.html">Compiling AMR-Wind</a></li>
<li class="toctree-l2"><a class="reference internal" href="inputs.html">AMR-Wind inputs file</a></li>
<li class="toctree-l2"><a class="reference internal" href="abl_bndry_io.html">AMR-Wind ABL Boundary I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="alm_fllc.html">Filtered lifting line correction (FLLC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">Running AMR-Wind</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Frequently Asked Questions (FAQ) and Common Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="post_processing_examples.html">Post-processing Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="compression.html">Compressing field output files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theory/theory.html">Theory Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">How to Cite AMR-Wind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibrefs.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMR-Wind</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="user.html">User Manual</a></li>
      <li class="breadcrumb-item active">Frequently Asked Questions (FAQ) and Common Errors</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user/faq.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="frequently-asked-questions-faq-and-common-errors">
<span id="faq"></span><h1>Frequently Asked Questions (FAQ) and Common Errors<a class="headerlink" href="#frequently-asked-questions-faq-and-common-errors" title="Link to this heading"></a></h1>
<ol class="arabic">
<li><p>“Invalid Particle” error stops the simulation</p>
<p>This error can appear when running actuator-based turbine simulations coupled to OpenFAST.
AMR-Wind uses particles to keep track of actuator points, and the positions of these points
are determined by the turbine model. If the velocity field in AMR-Wind becomes
huge or unrealistic (e.g., not a number), then the turbine model can return bad particle positions
that do not fit into the AMR-Wind domain. If this error stops your simulation,
check the velocity field leading up to the error to determine if something went wrong there.
If the velocity field is faulty, reevaluate your problem setup.</p>
</li>
<li><p>The simulation will not start and the code outputs many lines from the input file</p>
<p>This happens when a required input file argument is missing. Because AMReX outputs this
error from every process, and the error message lists all of the lines found in the input
file, it can be a lot of text to sort through for bigger cases.
Search for the string “ParmParse” within the output text to locate the expected input
argument that is missing from the input file so that it can be added.</p>
</li>
<li><p>There are many different source terms related to buoyancy or gravity. What do they do and when should they be used?</p>
<p>The basic buoyancy term often included in <code class="docutils literal notranslate"><span class="pre">ICNS.source_terms</span></code> is <code class="docutils literal notranslate"><span class="pre">BoussinesqBuoyancy</span></code>.
This source term calculates buoyancy based on the difference between the local temperature
and a reference temperature, which can be a field or a uniform constant, based on the physics
setup of the simulation. The resulting buoyancy term is proportional to the thermal expansion
coefficient (<span class="math notranslate nohighlight">\(\beta\)</span>).</p>
<p>When an ABL simulation that has <code class="docutils literal notranslate"><span class="pre">BoussinesqBuoyancy</span></code> as a source term has a <code class="docutils literal notranslate"><span class="pre">pressure_outflow</span></code> boundary
condition, the source term <code class="docutils literal notranslate"><span class="pre">ABLMeanBoussinesq</span></code> should also be added. This source term helps
offset the pressure field using a mean temperature profile to be compatible with the pressure boundary
conditions. If this source term is omitted, nonphysical behavior can appear as the flow nears the pressure outflow
boundary, especially where thermal stratification occurs.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">MultiPhase</span></code> physics module is active, the <code class="docutils literal notranslate"><span class="pre">GravityForcing</span></code> source term should be
used. This source term calculates the force of gravity based on the local density. Because temperature
variations do not cause significant density variations in water, this source term is essential
for capturing the effect of gravity in a multiphase flow. Adding the input line <code class="docutils literal notranslate"><span class="pre">ICNS.use_perturb_pressure</span> <span class="pre">=</span> <span class="pre">true</span></code>
formulates <code class="docutils literal notranslate"><span class="pre">GravityForcing</span></code> as a perturbation from a reference density field. This makes the
source term compatible with <code class="docutils literal notranslate"><span class="pre">pressure_outflow</span></code> conditions as well as other perturbational buoyancy terms.
For example, a multiphase ABL case would need <code class="docutils literal notranslate"><span class="pre">BoussinesqBuoyancy</span></code> activated to include the
buoyancy effects of temperature in the air, would potentially also need <code class="docutils literal notranslate"><span class="pre">ABLMeanBoussinesq</span></code> activated
if a pressure outflow is being used, and would also need <code class="docutils literal notranslate"><span class="pre">GravityForcing</span></code> to capture gravity effect on the
water with perturbational pressure turned on.</p>
</li>
</ol>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="run.html" class="btn btn-neutral float-left" title="Running AMR-Wind" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="post_processing_examples.html" class="btn btn-neutral float-right" title="Post-processing Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>