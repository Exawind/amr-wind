

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Filtered lifting line correction (FLLC) &mdash; AMR-Wind 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Running AMR-Wind" href="run.html" />
    <link rel="prev" title="AMR-Wind ABL Boundary I/O" href="abl_bndry_io.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AMR-Wind
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../walkthrough/index.html">Walkthrough</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="features.html">Capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="build.html">Compiling AMR-Wind</a></li>
<li class="toctree-l2"><a class="reference internal" href="inputs.html">AMR-Wind inputs file</a></li>
<li class="toctree-l2"><a class="reference internal" href="abl_bndry_io.html">AMR-Wind ABL Boundary I/O</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Filtered lifting line correction (FLLC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">Running AMR-Wind</a></li>
<li class="toctree-l2"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ) and Common Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="post_processing_examples.html">Post-processing Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="compression.html">Compressing field output files</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theory/theory.html">Theory Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">How to Cite AMR-Wind</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibrefs.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMR-Wind</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="user.html">User Manual</a></li>
      <li class="breadcrumb-item active">Filtered lifting line correction (FLLC)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user/alm_fllc.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="filtered-lifting-line-correction-fllc">
<span id="alm-fllc"></span><h1>Filtered lifting line correction (FLLC)<a class="headerlink" href="#filtered-lifting-line-correction-fllc" title="Link to this heading"></a></h1>
<p>To accurately represent wind turbine using the actuator line model (ALM) with OpenFAST, the user must select ALM parameters that are appropriate for the turbine of interest and for the near-turbine grid resolution.</p>
<p>The standard ALM has uniformly spaced points and thus requires a fine value of epsilon and a large number of points along the blade to properly model it. In recent years, a correction, called filtered lifting line correction (FLLC), has been developed <span id="id1">[<a class="reference internal" href="../bibrefs.html#id155" title="Luis A. Martínez-Tossas and Charles Meneveau. Filtered lifting line theory and application to the actuator line model. Journal of Fluid Mechanics, 863:269–292, 2019. doi:10.1017/jfm.2018.994.">Martínez-Tossas and Meneveau, 2019</a>]</span>. Such a correction also includes the use of points that are not uniformly spaced, thus lifting the requirement of small values of epsilon. It is recommended that you run the ALM with the FLLC on.</p>
<p>To enable the ALM with OpenFAST coupling, <code class="docutils literal notranslate"><span class="pre">Actuator</span></code> should be added to <code class="docutils literal notranslate"><span class="pre">incflo.physics</span></code>, <code class="docutils literal notranslate"><span class="pre">ActuatorForcing</span></code> should be added to <code class="docutils literal notranslate"><span class="pre">ICNS.source_terms</span></code>, and <code class="docutils literal notranslate"><span class="pre">Actuator.type</span> <span class="pre">=</span> <span class="pre">TurbineFastLine</span></code> should be set. Next, the user should enable FLLC, choose its type, and set the option for a non-uniform point distribution:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Actuator.TurbineFastLine.fllc = 1
Actuator.TurbineFastLine.fllc_nonuniform = 1
Actuator.TurbineFastLine.fllc_type = variable_chord
</pre></div>
</div>
<p>When selecting the <code class="docutils literal notranslate"><span class="pre">Actuator.TurbineFastLine.fllc_nonuniform</span></code> as <code class="docutils literal notranslate"><span class="pre">1</span></code>, a new distribution of points is calculated internally, based on the <code class="docutils literal notranslate"><span class="pre">Actuator.TurbineFastLine.num_points_blade</span></code> and <code class="docutils literal notranslate"><span class="pre">Actuator.TurbineFastLine.fllc_epsilon_dr_ratio</span></code> entries. The <code class="docutils literal notranslate"><span class="pre">Actuator.TurbineFastLine.fllc_epsilon_dr_ratio</span></code> value should be at least 1 with a maximum value of 3. It is recommended to use the value 3. This parameter controls the distribution of points, and its value should be selected based on the desired accuracy of the correction, according to Table 1 given in <span id="id2">[<a class="reference internal" href="../bibrefs.html#id199" title="Luis A. Martinez-Tossas, Dries Allaerts, Emmanuel Branlard, and Matthew J. Churchfield. A solution method for the filtered lifting line theory. Journal of Fluids Engineering, 147(1):011502, 09 2024. URL: https://doi.org/10.1115/1.4066296, arXiv:https://asmedigitalcollection.asme.org/fluidsengineering/article-pdf/147/1/011502/7381443/fe\_147\_01\_011502.pdf, doi:10.1115/1.4066296.">Martinez-Tossas <em>et al.</em>, 2024</a>]</span>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Actuator.TurbineFastLine.fllc_epsilon_dr_ratio = 3
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The entries <code class="docutils literal notranslate"><span class="pre">Actuator.TurbineFastLine.num_points_blade</span></code> and <code class="docutils literal notranslate"><span class="pre">Actuator.TurbineFastLine.num_points_tower</span></code> should match the entries <code class="docutils literal notranslate"><span class="pre">NumBlNds</span></code> from the AeroDyn blade file  and <code class="docutils literal notranslate"><span class="pre">NumTwrNds</span></code> from the AeroDyn input file.</p>
</div>
<p>Two values of epsilon should be set for the FLLC: the regular epsilon and an epsilon for the chord. The regular <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> should be set to twice the grid resolution. If you have a very fine grid near the turbine, e.g. 0.625 m,, then you can set <code class="docutils literal notranslate"><span class="pre">epsilon</span></code> to be 3 to 4 times the local grid resolution. The smaller the epsilon value, the more sensitive to the resolution the ALM will be. The <code class="docutils literal notranslate"><span class="pre">epsilon_chord</span></code> parameter represents the ideal epsilon value if FLLC were not to be used. However, we set both epsilon parameters for FLLC. One of the key details of the correction is that it uses the <code class="docutils literal notranslate"><span class="pre">epsilon_chord</span></code> on the non-uniform points, and this should be set to a target value regardless of the underlying grid resolution. The target values again depend on the desired accuracy of the correction and guidelines are also given on Table 1 of <span id="id3">[<a class="reference internal" href="../bibrefs.html#id199" title="Luis A. Martinez-Tossas, Dries Allaerts, Emmanuel Branlard, and Matthew J. Churchfield. A solution method for the filtered lifting line theory. Journal of Fluids Engineering, 147(1):011502, 09 2024. URL: https://doi.org/10.1115/1.4066296, arXiv:https://asmedigitalcollection.asme.org/fluidsengineering/article-pdf/147/1/011502/7381443/fe\_147\_01\_011502.pdf, doi:10.1115/1.4066296.">Martinez-Tossas <em>et al.</em>, 2024</a>]</span>.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Actuator.TurbineFastLine.epsilon       = 10 10 10        # for a near-turbine grid of 5 m
Actuator.TurbineFastLine.epsilon_chord = 0.25 0.25 0.25  # for any grid resolution
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your near-turbine grid is not isotropic, then consider your “grid resolution” to be the largest of <span class="math notranslate nohighlight">\(\Delta x\)</span>,  <span class="math notranslate nohighlight">\(\Delta y\)</span>, and  <span class="math notranslate nohighlight">\(\Delta z\)</span>.</p>
</div>
<p>Lastly, in certain cases, a numerical instability can arise from the application of the correction on the first few time steps. When a simulation begins, there is often an initial spike in some of the ALM quantities that affect the correction. Thus, in these scenarios, the user can choose a delay, in seconds, to start the correction. In cases where instabilities are observed, a 5-second delay has been shown to be sufficient:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Actuator.TurbineFastLine.fllc_start_time = 5
</pre></div>
</div>
<p>More details on other parameters are available in the description of each entry on the <a class="reference internal" href="inputs_Actuator.html#inputs-actuator"><span class="std std-ref">input file reference page</span></a>.</p>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="abl_bndry_io.html" class="btn btn-neutral float-left" title="AMR-Wind ABL Boundary I/O" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="run.html" class="btn btn-neutral float-right" title="Running AMR-Wind" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>